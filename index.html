<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIVD-Piet's Ontcijfer Uitdaging</title>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: #000;
            color: #fff;
            padding: 20px;
            text-align: center;
        }
        .input-field {
            margin: 10px;
        }
        #result {
            font-weight: bold;
            margin-top: 20px;
            color: #ff0000;
        }
        #timer {
            font-size: 2em;
            color: #ff0000;
            font-family: 'Digital-7', sans-serif;
            animation: blink 1s infinite;
        }
        @keyframes blink {
            0%, 50% {
                opacity: 1;
            }
            50.01%, 100% {
                opacity: 0;
            }
        }
        .warning-icon {
            font-size: 3em;
            color: #ff0000;
        }
        /* Tooltip container */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }
        /* Tooltip text */
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%; /* Position above the icon */
            left: 50%;
            margin-left: -125px; /* Center the tooltip */
            opacity: 0;
            transition: opacity 0.3s;
        }
        /* Tooltip arrow */
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%; /* At the bottom of the tooltip */
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #555 transparent transparent transparent;
        }
        /* Show the tooltip text when hovering over the tooltip container */
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        /* Information icon styling */
        .info-icon {
            font-size: 1.5em;
            color: #ff0000; /* Red color to match the menacing theme */
        }
    </style>
</head>
<body>
    <h1 class="warning-icon">⚠️</h1>
    <h1>AIVD-Piet's Ontcijfer Uitdaging</h1>
    <p>Ontcijfer de code met Vigenère, en open het slot, want voor jou ligt er iets moois klaar, vol plezier en genot!</p>
    <p>Lees om te beginnen de pagina over de encryptie techniek. Die is al ouder dan antiek! </p>
    <p>Bezoek daarvoor deze link, dat kan tegenwoordig met de klik van een pink!</p>
    <p>Gebruik daarna al je programmeerskills en sla zelf aan het typen, ik weet dat het vakantie is maar niet te veel miepen!</p>
    <p>Gebruik Python, Java, Kotlin of pen en papier; het maakt AIVD-piet allemaal niet uit. Maar ChatGPT is verboden, dan heb je het voor mij verbruid!</p>
    <p>Er heerst echter enige urgentie, neem niet te lang de tijd; over 30 minuten ontploft de bom, dan is dit huis zijn muren en dak kwijt!</p>

    <!-- Information Icon with Tooltip -->
    <div class="tooltip">
        <span class="info-icon">ℹ️</span>
        <span class="tooltiptext">
            "Het Vigenère-cijfer versleutelt een tekst door elke letter te verschuiven op basis van een sleutelwoord. Hierbij wordt elke letter van het alfabet omgezet naar een cijfer: A=0, B=1, C=2, enzovoort."

Hier is een voorbeeld:

Originele tekst: "ATTACKATDAWN"
Sleutelwoord: "LEMON"
Elke letter van de tekst wordt verschoven volgens de letter van het sleutelwoord. Hierbij herhalen we het sleutelwoord zo vaak als nodig is.

A van "ATTACK" is letter 0, en de L van "LEMON" is letter 11. A wordt dus 11 stappen opgeschoven, wat L oplevert.
T (19) verschuift met E (4), wat resulteert in X.
T (19) met M (12) wordt F.
Herhaal dit proces voor de hele tekst. Het versleutelde resultaat wordt dan:

Versleutelde tekst: "LXFOPVEFRNHR"
Met deze methode kan de ontvanger met het sleutelwoord de originele tekst terughalen.
        </span>
    </div>

    <p><strong>Versleuteld Bericht:</strong> LEAPYNQYP</p>
    <p><strong>Keyword:</strong> WALLHACK</p>

    <div class="input-field">
        <label for="solution">Voer oplossing in:</label>
        <input type="text" id="solution" placeholder="Voer oplossing hier in">
    </div>

    <button onclick="checkSolution()">Controleer oplossing</button>
    
    <p id="result"></p>
    <p id="timer">Tijd over: 30:00</p>

    <!-- Ticking sound -->
    <audio id="ticking-sound" src="ticking.mp3" preload="auto" loop></audio>

    <script>
        // Countdown timer variables
        let timeLeft = 1800;  // Countdown starts at 30 minutes (1800 seconds)
        const timerDisplay = document.getElementById("timer");
        const tickingSound = document.getElementById("ticking-sound");

        // Start countdown timer with ticking sound
        tickingSound.play();  // Start the ticking sound immediately
        const countdown = setInterval(() => {
            if (timeLeft <= 0) {
                clearInterval(countdown);
                tickingSound.pause();
                tickingSound.currentTime = 0;
                document.getElementById("result").innerText = "De tijd is om, de bom explodeert! Maar de code krijg je alsnog, wees niet gealarmeerd. Code: 979.";
            } else {
                // Format time as MM:SS
                let minutes = Math.floor(timeLeft / 60);
                let seconds = timeLeft % 60;
                if (seconds < 10) seconds = "0" + seconds;

                timerDisplay.innerText = `Tijd over: ${minutes}:${seconds}`;
                timeLeft -= 1;
            }
        }, 1000);  // Tick every second
        // Check solution function
        function checkSolution() {
            const solution = document.getElementById("solution").value.toUpperCase();

            // Check if the entered solution is correct
            if (solution === "PEPERNOOT") {
                clearInterval(countdown);  // Stop countdown when correct
                tickingSound.pause();
                tickingSound.currentTime = 0;
                document.getElementById("result").innerText = "Goed gedaan, je bent een held! Hier is de code voor die bom die je kwelt. Code: 979.";
                timerDisplay.innerText = "";  // Clear the timer display
            } else {
                document.getElementById("result").innerText = "Onjuiste oplossing. Probeer het nog een keer!";
            }
        }
    </script>
</body>
</html>
